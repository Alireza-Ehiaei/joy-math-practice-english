name: Generate iOS Certificates

on:
  workflow_dispatch:  # Manual trigger
  
jobs:
  generate_certs:
    runs-on: macos-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Generate Self-Signed Certificate (for testing)
        run: |
          # Generate test certificate (replace with real cert from Apple later)
          openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes -subj "/CN=TestCertificate"
          openssl pkcs12 -export -out certificate.p12 -inkey key.pem -in cert.pem -password pass:password123

          # Encode for GitHub Secrets
          base64 certificate.p12 > certificate_base64.txt
          echo "=== Save these values as GitHub Secrets ==="
          echo "CERTIFICATE_BASE64: $(cat certificate_base64.txt)"
          echo "PASSWORD: password123"
          echo "==========================================="
